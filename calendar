<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly Calendar with Notes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
        }
        .sidebar {
            width: 150px;
            background: #f4f4f4;
            padding: 10px;
            height: 100vh;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
        }
        .sidebar li {
            padding: 10px;
            cursor: pointer;
            text-align: center;
            border-bottom: 1px solid #ccc;
        }
        .sidebar li:hover {
            background: #ddd;
        }
        .main-content {
            flex: 1;
            padding: 20px;
            text-align: left;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            max-width: 500px;
        }
        .day-header {
            font-weight: bold;
            text-align: center;
            padding: 10px;
        }
        .day {
            border: 1px solid #ccc;
            padding: 20px;
            cursor: pointer;
            min-height: 80px;
            position: relative;
        }
        .note {
            position: absolute;
            bottom: 5px;
            left: 5px;
            font-size: 12px;
            color: blue;
        }
        #noteModal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border: 1px solid #ccc;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        .positive {
            background-color: lightgreen !important;
        }
        .negative {
            background-color: lightcoral !important;
        }
        #totalValue {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <ul>
            <li onclick="loadMonth(1)">January</li>
            <li onclick="loadMonth(2)">February</li>
            <li onclick="loadMonth(3)">March</li>
            <li onclick="loadMonth(4)">April</li>
            <li onclick="loadMonth(5)">May</li>
            <li onclick="loadMonth(6)">June</li>
            <li onclick="loadMonth(7)">July</li>
            <li onclick="loadMonth(8)">August</li>
            <li onclick="loadMonth(9)">September</li>
            <li onclick="loadMonth(10)">October</li>
            <li onclick="loadMonth(11)">November</li>
            <li onclick="loadMonth(12)">December</li>
        </ul>
    </div>
    <div class="main-content">
        <h1 id="month-title">Select a Month</h1>
        <div id="totalValue">Total Value: 0</div>
        <div class="calendar" id="calendar"></div>
    </div>
    
    <div id="noteModal">
        <h3>Add Note</h3>
        <textarea id="noteText" rows="4" cols="30"></textarea><br>
        <button onclick="saveNote()">Save</button>
        <button onclick="closeModal()">Cancel</button>
    </div>

    <script>
        const calendar = document.getElementById("calendar");
        let selectedDay = null;
        let selectedMonth = null;
        const monthDays = {1: 31, 2: 28, 3: 31, 4: 30, 5: 31, 6: 30, 7: 31, 8: 31, 9: 30, 10: 31, 11: 30, 12: 31};
        const dayNames = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];

        function loadMonth(month) {
            selectedMonth = month;
            const year = new Date().getFullYear();
            const firstDay = new Date(year, month - 1, 1).getDay();
            
            document.getElementById("month-title").textContent = new Date(year, month - 1).toLocaleString('default', { month: 'long' });
            calendar.innerHTML = "";
            let total = 0;

            // Add day headers
            dayNames.forEach(day => {
                const headerDiv = document.createElement("div");
                headerDiv.classList.add("day-header");
                headerDiv.textContent = day;
                calendar.appendChild(headerDiv);
            });

            // Add empty divs for days before the 1st of the month
            for (let i = 0; i < firstDay; i++) {
                const emptyDiv = document.createElement("div");
                emptyDiv.classList.add("day");
                emptyDiv.style.visibility = "hidden"; // Hide these empty divs
                calendar.appendChild(emptyDiv);
            }

            // Generate days
            for (let i = 1; i <= monthDays[month]; i++) {
                const dayDiv = document.createElement("div");
                dayDiv.classList.add("day");
                dayDiv.textContent = i;
                dayDiv.onclick = () => openModal(i);

                const savedNote = localStorage.getItem(`note_${month}_${i}`);
                if (savedNote) {
                    const noteSpan = document.createElement("span");
                    noteSpan.classList.add("note");
                    noteSpan.textContent = savedNote;
                    dayDiv.appendChild(noteSpan);
                    
                    const noteValue = parseFloat(savedNote);
                    if (!isNaN(noteValue)) {
                        total += noteValue; // Sum up values
                        if (noteValue > 0) {
                            dayDiv.classList.add("positive");
                        } else if (noteValue < 0) {
                            dayDiv.classList.add("negative");
                        }
                    }
                }
                calendar.appendChild(dayDiv);
            }
            updateTotal(total);
        }

        function openModal(day) {
            selectedDay = day;
            document.getElementById("noteText").value = localStorage.getItem(`note_${selectedMonth}_${day}`) || "";
            document.getElementById("noteModal").style.display = "block";
        }

        function saveNote() {
            const note = document.getElementById("noteText").value;
            localStorage.setItem(`note_${selectedMonth}_${selectedDay}`, note);
            document.getElementById("noteModal").style.display = "none";
            loadMonth(selectedMonth);
        }

        function closeModal() {
            document.getElementById("noteModal").style.display = "none";
        }

        function updateTotal(total) {
            const totalDiv = document.getElementById("totalValue");
            totalDiv.textContent = `Total Value: ${total}`;
            totalDiv.style.color = total > 0 ? "green" : (total < 0 ? "red" : "black");
        }
    </script>
</body>
</html>
